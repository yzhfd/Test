<form id="article_form" action="{% if article.id is null %}{{ path('article_new') }}{% else %}{{ path('article_edit', { 'id':article.id }) }}{% endif %}" method="post" {{ form_enctype(form) }}>

    <div class="clearfix">
        {{ form_label(form.title, '杂志选择') }}
        <div class="input"><select id="magsel" class="medium">
            {% for magzine in magzines %}
            <option value="{{ path('magzine_issues', { 'id':magzine.id }) }}" {% if issue is defined and issue.magzine.id == magzine.id %}selected="selected"{% endif %}>{{ magzine.name }}</option>
            {% endfor %}            
        </select></div>
    </div>
    
    <div class="clearfix">
        {{ form_label(form.title, '期刊选择') }}
        <div class="input"><select id="issuesel" class="medium" name="issueId" required=true>
            {% if issue is defined %}
            {% include 'MagendMagzineBundle:Magzine:issueOptions.html.twig' with {'issues':issue.magzine.issues} %}
            {% endif %}
        </select></div>
    </div>

    <div class="clearfix">
        {{ form_label(form.title, '标题') }}
        <div class="input">{{ form_errors(form.title) }}{{ form_widget(form.title, { 'attr':{'class':'span6'} }) }}</div>
    </div>
    
    <div class="clearfix">
        {{ form_label(form.architectsText, '建筑师') }}
        <div class="input">
            <select id="architectsel" class="medium" style="margin-bottom:5px;">
                <option value=""></option>
                {% for architect in architects %}
                <option value="{{ loop.index }}">{{ architect.name }}</option>
                {% endfor %}
            </select>
            {{ form_errors(form.architectsText) }}
            <div class="span5">{{ form_widget(form.architectsText, { 'attr':{'class':'taggable'} }) }}</div>
        </div>
    </div>
    
    <div class="clearfix">
        {{ form_label(form.keywordsText, '关键词') }}
        <div class="input">
            <select id="keywordsel" class="medium" style="margin-bottom:5px;">
                <option value=""></option>
                {% for keyword in keywords %}
                <option value="{{ loop.index }}">{{ keyword.keyword }}</option>
                {% endfor %}
            </select>
            {{ form_errors(form.keywordsText) }}
            <div class="span5">{{ form_widget(form.keywordsText, { 'attr': {'class':'taggable'} }) }}</div>
        </div>
    </div>
    
    <div class="clearfix">
        {{ form_label(form.lat, '经度') }}
        <div id="latdiv" class="input">{{ form_errors(form.lat) }}{{ form_widget(form.lat, { 'attr':{'class':'medium'} }) }}</div>
    </div>
    
    <div class="clearfix">
        {{ form_label(form.lng, '纬度') }}
        <div id="lngdiv" class="input">{{ form_errors(form.lng) }}{{ form_widget(form.lng, { 'attr':{'class':'medium'} }) }}</div>
    </div>
    
    <div class="clearfix">
        <div class="input">
        <div id="map_canvas" style="width:600px; height:300px; background-color:#CCC;"></div>
        </div>
    </div>
    
    {{ form_rest(form) }}
    
    <div class="actions">
        <button class="btn primary" type="submit">提交</button>
    </div>
</form>