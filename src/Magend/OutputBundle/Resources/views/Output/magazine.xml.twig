{% extends '::base.xml.twig' %}

{% block body %}
    {# old output
    <Magazine>
        <Issues>
            {% for issue in issues %}
            <Issue
                id="{{ issue.id }}"
                title="{{ issue.title }}"
                landscapeCover="{% if issue.landscapeCover is not null %}{{ asset('uploads/' ~ issue.landscapeCover) }}{% endif %}"
                portraitCover="{% if issue.portraitCover is not null %}{{ asset('uploads/' ~ issue.portraitCover) }}{% endif %}"
                price="{{ issue.priceLevel }}"
                preview="{% if issue.preview is not null %}{{ asset('uploads/' ~ issue.preview) }}{% endif %}"
                year="{{ issue.yearIssueNo }}"
                total="{{ issue.totalIssueNo }}"
                audio="{% if issue.audio is not null %}{{ asset('uploads/' ~ issue.audio) }}{% endif %}"
                publish="{{ issue.publishedAt|date('Y-m-d') }}"
            ></Issue>
            {% endfor %}
        </Issues>
    </Magazine>
    #}
    
    <Magazine>
        {% for issue in issues %}
        <Issue>
            <Username>{% if magazine.owner is not null %}{{ magazine.owner.username }}{% endif %}</Username>
            <MagazineId>{{ magazine.id }}</MagazineId>
            <MagazineName>{{ magazine.name }}</MagazineName>
            <Id>{{ issue.id }}</Id>
            <Name>{{ issue.title }}</Name>
            <LandscapeCover>{% if issue.landscapeCover %}{{ 'http://' ~ app.request.httpHost ~ asset('uploads/' ~ issue.landscapeCover) }}{% endif %}</LandscapeCover>
            <PortraitCover>{% if issue.portraitCover %}{{ 'http://' ~ app.request.httpHost ~ asset('uploads/' ~ issue.portraitCover) }}{% endif %}</PortraitCover>
            <IAPProductionID>{{ issue.iapId }}</IAPProductionID>
            <Period>{{ issue.yearIssueNo }}</Period>
            <Year>{{ issue.year }}</Year>
            <TotalPeriod>{{ issue.totalIssueNo }}</TotalPeriod>
            <Price>{{ issue.priceLevel }}</Price>
            <MType>1</MType>
            <Preview>{% if issue.preview %}{{ 'http://' ~ app.request.httpHost ~ asset('uploads/' ~ issue.preview) }}{% endif %}</Preview>
            <EnPreview>{% if issue.enPreview %}{{ 'http://' ~ app.request.httpHost ~ asset('uploads/' ~ issue.enPreview) }}{% endif %}</EnPreview>
            <Audio>{{ issue.audio }}</Audio>
            <Publish>{{ issue.publishedAt|date('Y-m-d') }}</Publish>
            <PublishMode>{{ issue.publishMode }}</PublishMode>
        </Issue>
        {% endfor %}
    </Magazine>
{% endblock %}