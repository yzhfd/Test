{% extends '::base.html.twig' %}

{% block title %}单页编辑{% endblock %}

{% block contentTitle %}
    <a href="{{ path('magzine_issues', { 'id':page.article.issue.magzine.id }) }}">{{ page.article.issue.magzine.name }}</a>
    <span style="color:#AAA"> / </span>
    <a href="{{ path('issue_article_list', { 'id':page.article.issue.id }) }}">{{ page.article.issue.title }}</a>
    <span style="color:#AAA"> / </span>
    <a href="{{ path('article_edit', { 'id':page.article.id }) }}">{{ page.article.title|default('(文章' ~ page.article.id ~ ')') }}</a>
    <span style="color:#AAA"> / </span>
    热点编辑
{% endblock %}

{% block main %}

<script type="text/javascript">
    var initHots = [];
{% for hot in page.landscapeHots %}
    {% set hotAttrs = hot.attrs|merge({ 'id':hot.id }) %}
    {% if hot.extraAttrs %}
        {% set hotAttrs = hotAttrs|merge({ 'extras':hot.extraAttrs }) %}
    {% endif %}
    
    initHots.push({{ hotAttrs|json_encode()|raw }});
{% endfor %}
</script>

<div id="page_editor">
    <!--<input type="checkbox" id="selenable" />
    <div id="info_panel">
        
    </div>-->
    <div style="width: 768px;">
        <div id="pageid" style="display:none;">{{page.id}}</div>
        <button id="saveall" class="btn primary">保存</button>
        <!--<button id="undo" class="btn">撤销</button>
        <button id="redo" class="btn">重做</button>-->
        <button id="flushall" class="btn danger" style="float: right;">清空</button>
    </div>
    <p/>
    <div id="hot_dialog" style="padding:10px;">
        <div id="hot_0_dialog" class="dlgcontent" style="display:none; min-width: 300px; min-height: 120px;">
            
        </div>
        <div id="hot_1_dialog" class="dlgcontent" style="display:none; min-width: 300px; ">
            <div id="video-upload-area">
                拖拽视频到这里
            </div>
        </div>
        <div id="hot_2_dialog" class="dlgcontent" style="display:none;">
            <form action="#">
                <input id="internRadio" type="radio" name="type" value="0" /> 内部页面
                <input id="externRadio" type="radio" name="type" value="1" checked="checked" /> 外部链接
                <p/>
                <input id="linkInput" type="text" class="span6" name="link" value="" />
            </form>
        </div>
    </div>
    <div>
        <div id="page_canvas_img" tabIndex="1">
            <img src="{{ asset('uploads/' ~ page.landscapeImg) }}" />
        </div>
    	<ul id="page_canvas">
    	</ul>
    </div>
    <ul id="hotlib">
        <li id="hot_0" class="hotobj hotimg" title="图片">图片</li>
        <li id="hot_1" class="hotobj hotvideo" title="视频">视频</li>
        <li id="hot_2" class="hotobj hotlink" title="链接">链接</li>
    </ul>
</div>
{% endblock %}